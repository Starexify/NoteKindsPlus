import funkin.modding.events.ScriptEvent;
import funkin.play.character.BaseCharacter;
import funkin.play.notes.notekind.ScriptedNoteKind;
import funkin.play.PlayState;

class GfSingNote extends ScriptedNoteKind {
    function new() {
        super("gf-sing", "Girlfriend Sing", null, [], true);
    }

    override public function onNoteHit(event:HitNoteScriptEvent) {
        if (PlayState.instance == null || PlayState.instance.currentStage == null) return;

        var gf:BaseCharacter = PlayState.instance.currentStage.getGirlfriend();

        var dirName:String = NoteKindsHandler.DIRECTION_NAMES[event.note.direction];
        if (event.note.isHoldNote && gf.hasAnimation(dirName + NoteKindsHandler.HOLD_SUFFIX)) dirName += NoteKindsHandler.HOLD_SUFFIX;

        var animToPlay:String = "sing" + dirName;

        if (!gf.hasAnimation(animToPlay)) return;
        gf.playAnimation(animToPlay);
    }
}